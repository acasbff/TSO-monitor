---
title: "TSO monitor"
---

```{r setup, include=FALSE}
library(googledrive)
library(googlesheets4)
library(tidyverse)
library(gt)
library(htmltools)
library(reactable)

# Authenticate with Google (first time only)
# googledrive::drive_auth()
# googlesheets4::gs4_auth()

# Read Google Sheet data
sheet_url <- "https://docs.google.com/spreadsheets/d/1wUMj9zsxa-eFd8F_XLyCbE7ZMsENwgH1cNq_0tXUHO0/edit?gid=0#gid=0"
tab1_data <- read_sheet(sheet_url, sheet = 'Governance', range = "A1:H33")
tab2_data <- read_sheet(sheet_url, sheet = 'Politics', range = "A1:L33")

# Basic data cleaning
tab1_data <- tab1_data %>%
  select(-`Ownership (detailed)`) %>% 
  group_by(Country) %>%
  mutate(row_id = row_number()) %>%
  ungroup()

tab2_data <- tab2_data %>%
  group_by(Country) %>%
  mutate(row_id = row_number()) %>%
  ungroup()
```


# Tab 1 {data-orientation=rows}

## Row 1

```{r}
#| title: Governance
reactable(
  tab1_data,
  #groupBy = "Country",
  # columns = list(
  #   row_id = list(show = FALSE),
  #   Country = list(
  #     cell = function(value) {
  #       # Placeholder for flag implementation
  #       span(value)
  #     }
  #   )
  # ),
  theme = reactableTheme(
    borderColor = "#dfe2e5",
    stripedColor = "#f6f8fa",
    highlightColor = "#f0f5f9",
    cellPadding = "8px 12px"
  )
)
```

# Tab 2 {data-orientation=rows}

## Row 1 

```{r}
#| title: Politics
reactable(
  tab2_data,
  #groupBy = "Country",
  # columns = list(
  #   row_id = list(show = FALSE),
  #   Country = list(
  #     cell = function(value) {
  #       # Placeholder for flag implementation
  #       span(value)
  #     }
  #   )
  # ),
  theme = reactableTheme(
    borderColor = "#dfe2e5",
    stripedColor = "#f6f8fa",
    highlightColor = "#f0f5f9",
    cellPadding = "8px 12px"
  )
)
```